{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\n\nconst input = document.querySelector('#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nconst dataDays = document.querySelector('.timer [data-days]');\nconst dataHours = document.querySelector('.timer [data-hours]');\nconst dataMinutes = document.querySelector('.timer [data-minutes]');\nconst dataSeconds = document.querySelector('.timer [data-seconds]');\n\nconsole.log(dataHours, dataDays);\n\nlet selectedUserDate = {};\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    selectedUserDate = selectedDates[0];\n    updateStartButtonState(selectedUserDate);\n  },\n};\n// якщо обрана дата в минклому, то startBtn.disabled\nfunction updateStartButtonState(selectedUserDate) {\n  const currentDate = new Date();\n  currentDate.setHours(0, 0, 0, 0); // Задаємо час на 00:00:00 для порівняння з датою\n  if (selectedUserDate < currentDate) {\n    startBtn.disabled = true;\n    alert('\"Please choose a date in the future\"');\n  } else {\n    startBtn.disabled = false;\n  }\n}\n\n// якщо updateStartButtonState() пропускає нас то слухаємо кнопку і виводимо в консоль обрану дату\nstartBtn.addEventListener('click', evt => {\n  console.log(selectedUserDate);\n  // ms difference between curent date and choose date\n  const dateDiff = selectedUserDate - Date.now();\n  displayTimeRemaining(dateDiff);\n  convertMs(dateDiff);\n});\n\n// варіант через class Timer та function displayTimeRemaining\n\n// class Timer {\n//   constructor({ onTick }) {\n//     this.onTick = onTick;\n//   }\n\n//   start(duration) {\n//     const startTime = Date.now();\n\n//     this.interval = setInterval(() => {\n//       const currentTime = Date.now();\n//       const delta = duration - (currentTime - startTime);\n//       this.onTick(delta);\n//       if (delta <= 0) {\n//         this.stop();\n//       }\n//     }, 1000);\n//   }\n\n//   stop() {}\n// }\n\n// function displayTimeRemaining(duration) {\n//   const timer = new Timer({\n//     onTick: remainingTime => {\n//       convertMs(remainingTime);\n//     },\n//   });\n\n//   timer.start(duration);\n// }\n\n// другий варіант з function displayTimeRemaining\nfunction displayTimeRemaining(duration) {\n  if (duration <= 0) {\n    console.log('Таймер завершено!');\n    return;\n  }\n\n  convertMs(duration);\n\n  if (duration > 0) {\n    setTimeout(() => {\n      displayTimeRemaining(duration - 1000);\n    }, 1000);\n  }\n}\n\nflatpickr(input, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  // return { days, hours, minutes, seconds };\n  console.log({ days, hours, minutes, seconds });\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["input","startBtn","dataDays","dataHours","selectedUserDate","options","selectedDates","updateStartButtonState","currentDate","evt","dateDiff","displayTimeRemaining","convertMs","duration","flatpickr","ms","days","hours","minutes","seconds"],"mappings":"svBAEA,MAAMA,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAY,SAAS,cAAc,qBAAqB,EAC1C,SAAS,cAAc,uBAAuB,EAC9C,SAAS,cAAc,uBAAuB,EAElE,QAAQ,IAAIA,EAAWD,CAAQ,EAE/B,IAAIE,EAAmB,CAAA,EACvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClCC,EAAuBH,CAAgB,CACxC,CACH,EAEA,SAASG,EAAuBH,EAAkB,CAChD,MAAMI,EAAc,IAAI,KACxBA,EAAY,SAAS,EAAG,EAAG,EAAG,CAAC,EAC3BJ,EAAmBI,GACrBP,EAAS,SAAW,GACpB,MAAM,sCAAsC,GAE5CA,EAAS,SAAW,EAExB,CAGAA,EAAS,iBAAiB,QAASQ,GAAO,CACxC,QAAQ,IAAIL,CAAgB,EAE5B,MAAMM,EAAWN,EAAmB,KAAK,IAAG,EAC5CO,EAAqBD,CAAQ,EAC7BE,EAAUF,CAAQ,CACpB,CAAC,EAoCD,SAASC,EAAqBE,EAAU,CACtC,GAAIA,GAAY,EAAG,CACjB,QAAQ,IAAI,mBAAmB,EAC/B,MACD,CAEDD,EAAUC,CAAQ,EAEdA,EAAW,GACb,WAAW,IAAM,CACfF,EAAqBE,EAAW,GAAI,CACrC,EAAE,GAAI,CAEX,CAEAC,EAAUd,EAAOK,CAAO,EAExB,SAASO,EAAUG,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAGlE,QAAQ,IAAI,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAAE,CAC/C,CAEA,QAAQ,IAAIP,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}